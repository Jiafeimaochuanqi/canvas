# GAMES102 HW4

## 任务

使用单参数曲线来拟合平面上任意有序点列并且增加编辑功能

## 思路

### 构图

数据控制点产生，根据控制点的导数方向计算左右导数控制点，显示的长度人为设置。设置数据结构包含这三种控制点。为了分段控制曲线，每个小区间$[x_i,x_{i+1}]$的三次参数分别保存，在编辑的时候只更新这段参数，再根据参数更新绘制点。每个控制点都是fixed属性。

### 增加控制点

当增加控制点时，计算范围时为从最后一个结点往前遍历直到遇到fixed为true的结点不参与计算。

### 编辑控制点

编辑控制点不影响fixed属性，更新参数的计算范围为从当前控制点往前遍历直到遇到fixed为true的结点不参与计算。

### 编辑导数控制点

编辑导数控制点使当前控制点fixed属性为true。

如果编辑的是左导数控制点，更新参数的计算范围为从当前控制点往前遍历直到遇到fixed为true的结点不参与计算。

如果编辑的是右导数控制点，更新参数的计算范围为从当前控制点往后遍历直到遇到fixed为true的结点不参与计算。

另外，计算三次样条由指定首尾二阶导数值变成指定首尾一阶导数值。

**注：**

**1. 任何一段计算范围除了首尾端点之外都是二阶连续的。**

**2. 之所以保留参数是方便计算左右导数控制点**